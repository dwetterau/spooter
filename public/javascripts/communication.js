// Generated by CoffeeScript 1.8.0
(function() {
  var getPlayerId, initialize, move, serializer, setState, shoot, socket;

  socket = io('http://localhost:3001');

  socket.on('initialize', function(data) {
    return initialize(data);
  });

  serializer = null;

  socket.on('state', function(data) {
    if (serializer) {
      serializer.setArray(new Uint8Array(data));
      return setState(serializer.toObject());
    } else {
      if (window.spooter.StateSerializer != null) {
        return serializer = new window.spooter.StateSerializer();
      }
    }

    /*
    setState data
     */
  });

  move = function(mouseX, mouseY) {
    var playerId;
    playerId = getPlayerId();
    return socket.emit("move", {
      playerId: playerId,
      mouseX: mouseX,
      mouseY: mouseY
    });
  };

  shoot = function() {
    var playerId;
    playerId = getPlayerId();
    return socket.emit("shoot", {
      playerId: playerId
    });
  };

  getPlayerId = function() {
    return window.spooter.playerId;
  };

  initialize = function(data) {
    var playerId, worldHeight, worldWidth;
    worldHeight = data.worldHeight, worldWidth = data.worldWidth, playerId = data.playerId;
    window.spooter.state = {};
    window.spooter.playerId = playerId;
    window.spooter.worldHeight = worldHeight;
    window.spooter.worldWidth = worldWidth;
    return window.spooter.initialized = false;
  };

  setState = function(newState) {
    window.spooter.state = newState;
    return window.spooter.initialized = true;
  };

  window.spooter = {
    initialized: false,
    move: move,
    shoot: shoot,
    state: {}
  };

}).call(this);

//# sourceMappingURL=communication.js.map
